-- Bật Auto Sell cho Rare, Legendary, Epic trong NewYearCrate
local rarities = {"Rare", "Legendary", "Epic"}

for _, rarity in ipairs(rarities) do
    local args = {
        [1] = "NewYearCrate",
        [2] = rarity
    }
    game:GetService("ReplicatedStorage").Events.TogglePoolAutoSell:InvokeServer(unpack(args))
    wait() -- Đợi 0.5 giây để tránh spam
end

-- Danh sách các code cần nhập
local codes = {
    "!Reacts25K",
    "100MVISITS",
    "WorldCollisionFixes",
    "miniupd",
    "20kreacts",
    "!WorldCollision",
    "!15kReacts"
}

-- Đổi toàn bộ code
for _, code in ipairs(codes) do
    game:GetService("ReplicatedStorage").Events.UiCommunication:FireServer("Codes/RedeemCode", code)
    wait(1) -- Đợi 1 giây giữa mỗi lần nhập code để tránh lỗi spam
end

-- Hàm mở 10 rương "EventPresent" liên tục
local function openCratesLoop()
    while true do
        local args = {
            [1] = "Crates/Open10",
            [2] = "EventPresent",
            [3] = {
                ["Darken"] = false,
                ["BarsHidden"] = false,
                ["WindowName"] = "Crates",
                ["PoolName"] = "NewYearCrate",
                ["HideSlotBar"] = false
            }
        }

        game:GetService("ReplicatedStorage").Events.UiCommunication:FireServer(unpack(args))
        wait() -- Đợi 1 giây giữa mỗi lần mở rương để tránh lỗi spam
    end
end

-- Teleport đến vị trí
local function teleportToPosition()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    -- Đặt CFrame teleport
    local targetCFrame = CFrame.new(1053.92798, 7.52704763, -89.988678)
    humanoidRootPart.CFrame = targetCFrame

    print("Đã teleport đến vị trí:", targetCFrame)
end

-- Script mua 40 TraitCrystal
local args = {
    [1] = "EventShop/BuyItem",
    [2] = {
        ["Item"] = "TraitCrystal",
        ["Amount"] = 40
    }
}

game:GetService("ReplicatedStorage").Events.UiCommunication:FireServer(unpack(args))

-- Teleport sau khi hoàn thành
teleportToPosition()

-- Chạy vòng lặp mở rương
openCratesLoop()
